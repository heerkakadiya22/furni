<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Untree.co">
    <link rel="shortcut icon" href="favicon.png">

    <meta name="description" content />
    <meta name="keywords" content="bootstrap, bootstrap4" />

    <%- include('../partials/Head') %>
        <title>
            <%= title %>
        </title>
        <style>

        </style>
</head>

<body>

    <%- include('../partials/Header') %>

        <!-- Start Hero Section -->
        <div class="hero">
            <div class="container">
                <div class="row justify-content-between">
                    <div class="col-lg-5">
                        <div class="intro-excerpt">
                            <h1>
                                <%= title %>
                            </h1>
                        </div>
                    </div>
                    <div class="col-lg-7"></div>
                </div>
            </div>
        </div>
        <!-- End Hero Section -->

        <div class="untree_co-section product-section before-footer-section">
            <div class="container">

                <!-- Search + Category Filter -->
                <form method="GET" action="/shop" class="row mb-5">
                    <div class="col-md-4 mb-2">
                        <div class="dropdown">
                            <button class="btn dropdown-toggle w-100 border" type="button" data-bs-toggle="dropdown">
                                <%= selectedCategory==="all" ? "All Categories" : selectedCategory %>
                            </button>
                            <ul class="dropdown-menu w-100">
                                <li>
                                    <a class="dropdown-item <%= selectedCategory === " all" ? "active" : "" %>"
                                        href="/shop?category=all&search=<%= searchQuery %>">
                                            All Categories
                                    </a>
                                </li>
                                <% categories.forEach(cat=> { %>
                                    <li>
                                        <a class="dropdown-item <%= selectedCategory === cat.name ? " active" : "" %>"
                                            href="/shop?category=<%= cat.name %>&search=<%= searchQuery %>">
                                                    <%= cat.name %>
                                        </a>
                                    </li>
                                    <% }) %>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-6 mb-2">
                        <input type="text" name="search" placeholder="Search products..." class="form-control"
                            value="<%= searchQuery %>">
                    </div>
                    <div class="col-md-2 mb-2">
                        <button type="submit" class="btn btn-primary w-100">Filter</button>
                    </div>
                </form>

                <!-- Products Grid -->
                <div class="row" id="product-container">
                    <% if (products && products.length> 0) { %>
                        <% products.forEach((product, index)=> { %>
                            <div class="col-12 col-md-4 col-lg-3 mb-5 product-item-wrapper"
                                style="display: <%= index < 8 ? 'block' : 'none' %>;">
                                <a class="product-item" href="/product/<%= product.id %>">
                                    <img src="/assets/admin/img/products/<%= product.main_img %>"
                                        class="img-fluid product-thumbnail">
                                    <h3 class="product-title">
                                        <%= product.name %>
                                    </h3>
                                    <strong class="product-price">₹<%= product.newPrice %></strong>
                                    <div class="product-old-price">
                                        ₹<%= product.oldPrice %>
                                    </div>
                                    <span class="icon-cross">
                                        <img src="/assets/user/images/cross.svg" class="img-fluid">
                                    </span>
                                </a>
                            </div>
                            <% }) %>
                                <% } else { %>
                                    <div class="col-12">
                                        <p>No products found.</p>
                                    </div>
                                    <% } %>
                </div>

                <!-- Loader Button -->
                <div class="text-center mt-3">
                    <button id="loadMore" class="btn btn-outline-primary">
                        <span id="loader" class="spinner-border spinner-border-sm me-2" style="display:none;"></span>
                        Load More
                    </button>
                </div>


            </div>
        </div>

        <%- include('../partials/footer') %>
            <%- include('../partials/script') %>

</body>

</html>