<!DOCTYPE html>
<html lang="en" class="light-style layout-menu-fixed" dir="ltr" data-theme="theme-default"
    data-assets-path="/assets/admin/" data-template="vertical-menu-template-free">

<head>
    <meta charset="utf-8" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
    <title>
        <%= title %>
    </title>
    <meta name="description" content />
    <meta name="csrf-token" content="<%= csrfToken %>">

    <%- include('../partials/head') %>
        <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
        <!-- Froala CSS -->
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/froala-editor/4.0.15/css/froala_editor.pkgd.min.css">

</head>

<body>
    <div class="layout-wrapper layout-content-navbar">
        <div class="layout-container">
            <%- include('../partials/sidebar') %>
                <div class="layout-container">
                    <div class="content-wrapper">
                        <div class="container-xxl flex-grow-1 container-p-y">
                            <%- include('../partials/breadcrumbs') %>

                                <!-- Tabs Navigation -->
                                <ul class="nav nav-pills flex-column flex-md-row mb-3" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link <%= activeTab === 'connections' ? 'active' : '' %>"
                                            href="/setting?tab=connections">
                                            <i class="bx bx-link-alt me-1"></i>
                                            Connections
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link <%= activeTab === 'theme' ? 'active' : '' %>"
                                            href="/setting?tab=theme">
                                            <i class="bx bx-palette me-1"></i> Theme
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link <%= activeTab === 'terms_privacy' ? 'active' : '' %>"
                                            href="/setting?tab=terms_privacy">
                                            <i class="bx bx-file me-1"></i> Terms &
                                            Privacy
                                        </a>
                                    </li>
                                </ul>

                                <div class="tab-content">
                                    <!-- Connections Tab -->
                                    <div class="tab-pane fade <%= activeTab === 'connections' ? 'show active' : '' %>"
                                        id="connections" role="tabpanel">
                                        <div class="row">
                                            <!-- General Info Column -->
                                            <!-- GENERAL INFO CARD -->
                                            <div class="col-md-6 col-12">
                                                <div class="card mb-4">
                                                    <div class="d-flex align-items-center">
                                                        <h5 class="card-header">General
                                                            Info & Logos</h5>
                                                        <button type="button" class="btn btn-primary ms-auto m-3"
                                                            data-bs-toggle="modal"
                                                            data-bs-target="#editGeneralIconsModal">
                                                            Update
                                                        </button>
                                                    </div>
                                                    <div class="card-body">
                                                        <p>Customize your general
                                                            contact information and
                                                            site branding.
                                                        </p>

                                                        <% const generalIcons=[ { key: "email" , label: "Email" , icon:
                                                            settings.email }, { key: "phone" , label: "Phone" , icon:
                                                            settings.phone }, { key: "location" , label: "Location" ,
                                                            icon: settings.location }, ]; %>

                                                            <% generalIcons.forEach(item=>
                                                                { if (item.icon) { %>
                                                                <div class="d-flex mb-3">
                                                                    <div class="flex-shrink-0">
                                                                        <i class="<%= item.icon %> me-3"
                                                                            style="font-size: 20px;"></i>
                                                                    </div>
                                                                    <div class="flex-grow-1 row">
                                                                        <div class="col-8 col-sm-7 mb-sm-0 mb-2">
                                                                            <h6 class="mb-0">
                                                                                <%= item.label %>
                                                                            </h6>
                                                                            <small class="text-muted">
                                                                                <%= item.icon %>
                                                                            </small>
                                                                        </div>
                                                                        <div class="col-4 col-sm-5 text-end">
                                                                            <button type="button"
                                                                                class="btn btn-icon btn-outline-danger"
                                                                                onclick="confirmDeleteIcon('<%= item.key %>')">
                                                                                <i class="bx bx-trash-alt"></i>
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <% } }); %>

                                                                    <% if (settings.sitename_logo || settings.logo) { %>
                                                                        <div
                                                                            class="d-flex align-items-center gap-4 mt-3">
                                                                            <% if (settings.sitename_logo) { %>
                                                                                <div class="text-center">
                                                                                    <img src="/assets/admin/img/favicon/<%= settings.sitename_logo %>"
                                                                                        alt="Site Name Logo"
                                                                                        height="40" />
                                                                                    <p class="mb-0 small">Site
                                                                                        Logo</p>
                                                                                </div>
                                                                                <% } %>
                                                                                    <% if (settings.logo) { %>
                                                                                        <div class="text-center">
                                                                                            <img src="/assets/admin/img/favicon/<%= settings.logo %>"
                                                                                                alt="Main Logo"
                                                                                                height="40" />
                                                                                            <p class="mb-0 small">Main
                                                                                                Logo</p>
                                                                                        </div>
                                                                                        <% } %>
                                                                        </div>
                                                                        <% } %>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Social Accounts Column -->
                                            <div class="col-md-6 col-12">
                                                <div class="card mb-4">
                                                    <div class="d-flex align-items-center">
                                                        <h5 class="card-header">Social
                                                            Accounts</h5>
                                                        <button type="button" class="btn btn-primary ms-auto m-3"
                                                            data-bs-toggle="modal"
                                                            data-bs-target="#editSocialIconsModal">
                                                            Update
                                                        </button>
                                                    </div>
                                                    <div class="card-body">
                                                        <p>Display content from
                                                            social accounts on your
                                                            site.</p>
                                                        <% const socials=[ { name: "Facebook" , icon:
                                                            settings.facebook_icon }, { name: "Twitter" , icon:
                                                            settings.twitter_icon }, { name: "Instagram" , icon:
                                                            settings.insta_icon }, { name: "LinkedIn" , icon:
                                                            settings.linkedin_icon } ]; %>
                                                            <% socials.forEach(social=>
                                                                {
                                                                if (social.icon) { %>
                                                                <div class="d-flex mb-3">
                                                                    <div class="flex-shrink-0">
                                                                        <i class="<%= social.icon %> me-3"
                                                                            style="font-size: 30px;"></i>
                                                                    </div>
                                                                    <div class="flex-grow-1 row">
                                                                        <div class="col-8 col-sm-7 mb-sm-0 mb-2">
                                                                            <h6 class="mb-0">
                                                                                <%= social.name %>
                                                                            </h6>
                                                                            <small class="text-muted">Not
                                                                                Connected</small>
                                                                        </div>
                                                                        <div class="col-4 col-sm-5 text-end">
                                                                            <button type="button"
                                                                                class="btn btn-icon btn-outline-danger"
                                                                                onclick="confirmDeleteIcon('<%= social.name.toLowerCase() %>')">
                                                                                <i class="bx bx-trash-alt"></i>
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <% } }); %>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- MODALS FOR 'CONNECTIONS' TAB -->

                                        <!-- Edit Social Icons Modal -->
                                        <div class="modal fade" id="editSocialIconsModal" tabindex="-1"
                                            aria-labelledby="editSocialIconsModalLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content">
                                                    <form action="/setting/social/update" method="POST">
                                                        <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title" id="editSocialIconsModalLabel">Edit
                                                                Social Icons</h5>
                                                            <button type="button" class="btn-close"
                                                                data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="row">
                                                                <% const fields=[ { name: "facebook_icon" ,
                                                                    label: "Facebook Icon" }, { name: "twitter_icon" ,
                                                                    label: "Twitter Icon" }, { name: "insta_icon" ,
                                                                    label: "Instagram Icon" }, { name: "linkedin_icon" ,
                                                                    label: "LinkedIn Icon" } ]; %>
                                                                    <% fields.forEach(f=> {
                                                                        %>
                                                                        <div class="col-12 mb-3">
                                                                            <label for="<%= f.name %>"
                                                                                class="form-label">
                                                                                <%= f.label %>
                                                                            </label>
                                                                            <input type="text" class="form-control"
                                                                                id="<%= f.name %>" name="<%= f.name %>"
                                                                                value="<%= settings[f.name] || '' %>"
                                                                                placeholder="e.g. bx bxl-facebook" />
                                                                        </div>
                                                                        <% }) %>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-outline-secondary"
                                                                data-bs-dismiss="modal">Close</button>
                                                            <button type="submit" class="btn btn-primary">Save
                                                                Changes</button>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Edit General Info Modal -->
                                        <div class="modal fade" id="editGeneralIconsModal" tabindex="-1"
                                            aria-labelledby="editGeneralIconsModalLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content">
                                                    <form action="/setting/general/update" method="POST"
                                                        enctype="multipart/form-data">
                                                        <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title" id="editGeneralIconsModalLabel">
                                                                Edit General Info &
                                                                Logos</h5>
                                                            <button type="button" class="btn-close"
                                                                data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="row">
                                                                <% const generalFields=[ { name: "email" ,
                                                                    label: "Email" }, { name: "phone" , label: "Phone"
                                                                    }, { name: "location" , label: "Location" }, ]; %>

                                                                    <% generalFields.forEach(f=>
                                                                        { %>
                                                                        <div class="col-md-6 mb-3">
                                                                            <label for="<%= f.name %>"
                                                                                class="form-label">
                                                                                <%= f.label %>
                                                                            </label>
                                                                            <input type="text" class="form-control"
                                                                                id="<%= f.name %>" name="<%= f.name %>"
                                                                                value="<%= settings[f.name] || '' %>" />
                                                                        </div>
                                                                        <% }); %>

                                                                            <div class="col-md-6 mb-3">
                                                                                <label for="sitename_logo"
                                                                                    class="form-label">Site
                                                                                    Name
                                                                                    Logo</label>
                                                                                <input type="file" class="form-control"
                                                                                    name="sitename_logo"
                                                                                    accept="image/*" />
                                                                            </div>

                                                                            <div class="col-md-6 mb-3">
                                                                                <label for="logo"
                                                                                    class="form-label">Main
                                                                                    Logo</label>
                                                                                <input type="file" class="form-control"
                                                                                    name="logo" accept="image/*" />
                                                                            </div>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-outline-secondary"
                                                                data-bs-dismiss="modal">Close</button>
                                                            <button type="submit" class="btn btn-primary">Save
                                                                Changes</button>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <!-- End Connections Tab -->

                                    <!-- Theme Tab -->
                                    <div class="tab-pane fade <%= activeTab === 'theme' ? 'show active' : '' %>"
                                        id="theme" role="tabpanel">
                                        <div class="card shadow-sm border-0">
                                            <div class="d-flex align-items-center">
                                                <h5 class="card-header mb-0">Theme
                                                    Settings</h5>
                                                <button type="button" class="btn btn-primary ms-auto m-3"
                                                    data-bs-toggle="modal" data-bs-target="#editThemeColorModal">
                                                    <i class="bx bx-edit"></i>
                                                    Update
                                                </button>
                                            </div>
                                            <div class="card-body">
                                                <h6 class="fw-bold">Theme Color</h6>
                                                <div class="d-flex align-items-center gap-3">
                                                    <div id="themeColorPreview"
                                                        style="width: 50px; height: 50px; border-radius: 6px; border: 1px solid #ccc; background-color: <%= settings.theme_color || '#ffffff' %>;">
                                                    </div>
                                                    <p class="mb-0"><strong>
                                                            <%= settings.theme_color || 'No color set' %>
                                                        </strong></p>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Edit Theme Color Modal -->
                                        <div class="modal fade" id="editThemeColorModal" tabindex="-1"
                                            aria-labelledby="editThemeColorModalLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content border-0 shadow-sm">
                                                    <form action="/setting/theme/update" method="POST">
                                                        <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title fw-bold"
                                                                id="editThemeColorModalLabel">
                                                                Edit Theme Color
                                                            </h5>
                                                            <button type="button" class="btn-close"
                                                                data-bs-dismiss="modal"></button>
                                                        </div>
                                                        <div class="modal-body text-center">

                                                            <!-- Preview Box -->
                                                            <label for="themeColorPicker" id="themeColorPreview"
                                                                style="display: inline-block;width: 80px;height: 80px;border-radius: 8px;border: 2px solid #ccc; cursor: pointer; background-color: <%= settings.theme_color || '#ffffff' %>;">
                                                            </label>

                                                            <!-- Hidden Color Picker -->
                                                            <input type="color" id="themeColorPicker" name="theme_color"
                                                                value="<%= settings.theme_color || '#ffffff' %>"
                                                                style="opacity:0; position:absolute; z-index:-1;">

                                                            <!-- Hex Code Display -->
                                                            <p class="mt-3 fw-bold" id="themeColorValue">
                                                                <%= settings.theme_color || '#ffffff' %>
                                                            </p>

                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-outline-secondary"
                                                                data-bs-dismiss="modal">Close</button>
                                                            <button type="submit" class="btn btn-primary">
                                                                <i class="bx bx-save"></i>
                                                                Save Changes
                                                            </button>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <!-- End Theme Tab -->

                                    <!-- Terms & Privacy Tab -->
                                    <div class="tab-pane fade <%= activeTab === 'terms_privacy' ? 'show active' : '' %>"
                                        id="terms_privacy" role="tabpanel">
                                        <div class="card">
                                            <div class="d-flex align-items-center">
                                                <h5 class="card-header">Terms &
                                                    Privacy Settings</h5>
                                                <button type="button" class="btn btn-primary ms-auto m-3"
                                                    data-bs-toggle="modal" data-bs-target="#editTermsPrivacyModal">
                                                    Update
                                                </button>
                                            </div>
                                            <% const termsPrivacyFields=[ { key: "terms" , label: "Terms" , content:
                                                settings.terms }, { key: "privacy" , label: "Privacy" , content:
                                                settings.privacy }, { key: "description" , label: "Description" ,
                                                content: settings.description } ]; %>

                                                <div class="card-body">

                                                    <% termsPrivacyFields.forEach(field=> {
                                                        %>
                                                        <h6>
                                                            <%= field.label %>
                                                        </h6>
                                                        <div><%- field.content || `No ${field.label} content` %></div>
                                                        <div class="text-end mb-3">
                                                            <button type="button"
                                                                class="btn btn-icon btn-outline-danger"
                                                                onclick="confirmDeleteTermsField('<%= field.key %>')">
                                                                <i class="bx bx-trash-alt"></i>
                                                            </button>
                                                        </div>
                                                        <% }); %>
                                                </div>
                                        </div>

                                        <!-- Edit Terms & Privacy Modal -->

                                        <div class="modal fade" id="editTermsPrivacyModal" tabindex="-1"
                                            aria-labelledby="editTermsPrivacyModalLabel" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered modal-lg">
                                                <div class="modal-content">
                                                    <form action="/setting/terms-privacy/update" method="POST">
                                                        <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title" id="editTermsPrivacyModalLabel">Edit
                                                                Terms & Privacy</h5>
                                                            <button type="button" class="btn-close"
                                                                data-bs-dismiss="modal"></button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <div class="mb-3">
                                                                <label for="terms" class="form-label">Terms</label>
                                                                <textarea id="terms" name="terms"
                                                                    class="form-control rich-editor">
                                                                    <%= settings.terms || '' %>
                                                                </textarea>
                                                            </div>
                                                            <div class="mb-3">
                                                                <label for="privacy" class="form-label">Privacy</label>
                                                                <textarea id="privacy" name="privacy"
                                                                    class="form-control rich-editor">
                                                                    <%= settings.privacy || '' %>
                                                                </textarea>
                                                            </div>
                                                            <div class="mb-3">
                                                                <label for="description"
                                                                    class="form-label">Description</label>
                                                                <textarea id="description" name="description"
                                                                    class="form-control rich-editor">
                                                                    <%= settings.description || '' %>
                                                                </textarea>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-outline-secondary"
                                                                data-bs-dismiss="modal">Close</button>
                                                            <button type="submit" class="btn btn-primary">Save
                                                                Changes</button>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- End Terms & Privacy Tab -->

                                </div>
                        </div>
                        <%- include('../partials/footer') %>
                            <div class="content-backdrop fade"></div>
                    </div>
                </div>
        </div>
        <div class="layout-overlay layout-menu-toggle"></div>
    </div>
    <%- include('../partials/script') %>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/froala-editor/4.0.15/js/froala_editor.pkgd.min.js"></script>
        ;
        <script src="/assets/admin/js/settings.js"></script>
</body>

</html>