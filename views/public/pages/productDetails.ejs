<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Untree.co">
    <link rel="shortcut icon" href="favicon.png">

    <meta name="description" content />
    <meta name="keywords" content="bootstrap, bootstrap4" />

    <%- include('../partials/Head') %>
        <title>
            <%= title %>
        </title>
</head>

<body>
    <%- include('../partials/Header') %>


        <!-- Start Hero Section -->
        <div class="hero">
            <div class="container">
                <div class="row justify-content-between">
                    <div class="col-lg-5">
                        <div class="intro-excerpt">

                        </div>
                    </div>
                    <div class="col-lg-7"></div>
                </div>
            </div>
        </div>
        <!-- End Hero Section -->

        <div class="container my-5">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="card product-card shadow-lg border-0 rounded-5 p-4">
                        <!-- Go Back Button -->
                        <div class="mb-3">
                            <a href="javascript:history.back()"
                                class="btn-back-custom d-inline-flex align-items-center">
                                <i class="bi bi-arrow-left me-2"></i> Go Back
                            </a>
                        </div>
                        <div class="row g-4">
                            <!-- Product Gallery -->
                            <div class="col-lg-6 text-center">
                                <div class="main-img-container mb-3 position-relative d-inline-block">
                                    <img src="/assets/admin/img/products/<%= product.main_img %>"
                                        class="img-fluid rounded-3 shadow-sm main-img" id="mainImage">

                                    <!-- Wishlist Button -->
                                    <input type="hidden" id="csrfToken" name="csrfToken" value="<%= csrfToken %>">
                                    <button class="btn-cart-custom wishlist-btn position-absolute top-0 end-0 m-2"
                                        data-sku="<%= product.sku %>">
                                        <i class="<%= isInWishlist ? 'bi bi-heart-fill' : 'bi bi-heart' %>"
                                            style="<%= isInWishlist ? 'color:red;' : '' %>"></i>
                                    </button>

                                </div>

                                <div class="d-flex justify-content-center gap-2 flex-wrap">
                                    <% if (product.sub_img && product.sub_img.length> 0) { %>
                                        <% product.sub_img.forEach(img=> { %>
                                            <img src="/assets/admin/img/products/<%= img %>"
                                                class="img-thumbnail thumb-img rounded-3"
                                                onclick="document.getElementById('mainImage').src=this.src">
                                            <% }) %>
                                                <% } else { %>
                                                    <p class="text-muted">No additional images available</p>
                                                    <% } %>
                                </div>
                            </div>


                            <!-- Product Details -->
                            <div class="col-lg-6">
                                <h2 class="fw-bold text-dark mb-2">
                                    <%= product.name %>
                                </h2>
                                <div class="d-flex align-items-center  my-4 custom-price-qty">

                                    <!-- Price -->
                                    <div class="price-box">
                                        <span class="d-block text-muted small">PRICE</span>
                                        <h4 class="fw-bold mb-0 price-text">
                                            <%= formatCurrency(product.newPrice) %>
                                        </h4>
                                        <div class="product-old-price">
                                            <%= formatCurrency(product.oldPrice) %>
                                        </div>
                                    </div>

                                    <!-- Quantity -->
                                    <div class="quantity-box">
                                        <span class="d-block text-muted small">QUANTITY</span>
                                        <div class="quantity-container d-flex align-items-center rounded-pill">
                                            <button class="qty-btn decrease" type="button">&minus;</button>
                                            <input type="text" class="qty-input" value="1">
                                            <button class="qty-btn increase" type="button">&plus;</button>
                                        </div>
                                    </div>
                                </div>


                                <div class="product-tabs mt-4">

                                    <!-- Tab headers -->
                                    <ul class="nav custom-tabs border-bottom mb-3" id="productTab" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active" id="description-tab" data-bs-toggle="tab"
                                                data-bs-target="#description" type="button" role="tab">
                                                DESCRIPTION
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="details-tab" data-bs-toggle="tab"
                                                data-bs-target="#details" type="button" role="tab">
                                                DETAILS
                                            </button>
                                        </li>
                                    </ul>

                                    <!-- Tab contents -->
                                    <div class="tab-content" id="productTabContent">

                                        <!-- Description Tab -->
                                        <div class="tab-pane fade show active" id="description" role="tabpanel">
                                            <p class="text-muted">
                                                <%= product.description %>
                                            </p>
                                        </div>

                                        <!-- Details Tab -->
                                        <div class="tab-pane fade" id="details" role="tabpanel">
                                            <div class="d-flex justify-content-between py-1">
                                                <span class="text-muted">Brand</span>
                                                <span>
                                                    <%= product.name %>
                                                </span>
                                            </div>
                                            <div class="d-flex justify-content-between py-1">
                                                <span class="text-muted">Size</span>
                                                <span>
                                                    <%= product.dimention %>
                                                </span>
                                            </div>
                                            <div class="d-flex justify-content-between py-1">
                                                <span class="text-muted">Material</span>
                                                <span>
                                                    <%= product.material %>
                                                </span>
                                            </div>

                                            <div class="d-flex justify-content-between py-1">
                                                <span class="text-muted">Color</span>
                                                <span>
                                                    <% if (product.color) { %>
                                                        <span class="color-circle"
                                                            style="background:<%= product.color %>"></span>
                                                        <% } else { %>
                                                            <p class="text-muted">No color available</p>
                                                            <% } %>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <!-- Cart Buttons -->
                                <div class="my-3 d-flex gap-3">
                                    <button class="btn btn-primary"><i class="bi bi-cart-check-fill me-2"></i>Add
                                        to
                                        Cart</button>
                                </div>

                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>


        <%- include('../partials/footer') %>
            <%- include('../partials/script') %>
                <script>
                    window.isLoggedIn = <%= session?.user ? true : false %>;
                    console.log("Logged in?", window.isLoggedIn);
                </script>
                <script src="/assets/user/js/productDetails.js"></script>
</body>

</html>